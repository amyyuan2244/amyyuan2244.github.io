<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<p>This visualization explores how the Consumer Price Index (CPI) has changed since the start of the COVID-19 pandemic.
While itâ€™s difficult to place an exact date on when a pandemic starts, the World Health Organization officially declared COVID-19 a pandemic in March of 2020, so this visualization will use March 2020 as the start of the pandemic. The most recent CPI data available is from June 2025. Thus, this visualization will explore how the CPI has changed from the start of the COVID-19 pandemic in March 2020 to most recently, June 2025.
</p>
<style> rect {fill: lightblue; stroke: black; }</style>
<body onload='init()'>
<svg>
</svg>
<script>


async function init() {

const data = await d3.csv('https://amyyuan2244.github.io/bigCategories.csv');

const width = 1000;
const height = 500;
const margin = 50;
const maxY = 60;
var xCategories = ["all items", "food", "energy", "all items except food and energy"];
var x = d3.scaleBand().domain(xCategories).range([0, width]);
var y = d3.scaleLinear().domain([0,maxY]).range([height, 0]);


d3.select('svg')
.attr("width", width + 2 * margin)
.attr("height", height + 2 * margin)
.append("g")
.attr("transform", "translate("+margin+","+margin+")")
.selectAll('rect')
.data(data)
.enter()
.append('rect')
.attr('x', function(d,i) { return (width * i)/xCategories.length;})
.attr('y', function(d) {return (height - (d.percentageChange * height/maxY));})
.attr("width", function(d,i ) {return width/xCategories.length;})
.attr("height", function(d,i) {return d.percentageChange * height/maxY;});


// axes
d3.select("svg").append("g")
.attr("transform", "translate("+margin+","+margin+")")
.call(d3.axisLeft(y));

d3.select("svg").append("g")
.attr("transform", "translate("+margin+","+(height + margin)+")")
.call(d3.axisBottom(x));

// axes labels
d3.select("svg")
    .append("text")
    .attr("class", "x label")
    .attr("text-anchor", "end")
    .attr("x", (width/2 + 2*margin))
    .attr("y", height+margin*2-10)
    .style("font-size", "14px") 
    .text("Categories of Expenditures");

d3.select("svg")
    .append("text")
    .attr("class", "y label")
    .attr("text-anchor", "end")
    .attr("x", -height/4)
    .attr("y", 0)
    .attr("dy", ".75em")
    .attr("transform", "rotate(-90)")
    .style("font-size", "14px") 
    .text("Percentage Change in CPI from March 2020 to June 2025");

// chart title
d3.select("svg")
    .append("text")
    .attr("x", (width/2 + margin))             
    .attr("y", (margin/ 2))
    .attr("text-anchor", "middle")  
    .style("font-size", "16px") 
    .style("text-decoration", "underline")  
    .text("Percentage Change in the\n Consumer Price Index (CPI) \n Across Selected Expenditure Categories from March 2020 to June 2025 (Not Seasonally Adjusted)");
}
</script></html>